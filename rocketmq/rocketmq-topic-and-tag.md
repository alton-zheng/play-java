# Topic与Tag最佳实践

&nbsp;

在消息队列RocketMQ版中，Topic与Tag都是业务上用来归类的标识，区分在于Topic是一级分类，而Tag可以理解为是二级分类。您可通过本文了解如何搭配使用Topic和Tag来实现消息过滤。

&nbsp;

## 背景信息

Topic和Tag的定义如下：

- Topic

  消息主题，通过Topic对不同的业务消息进行分类。

- Tag

  消息标签，用来进一步区分某个Topic下的消息分类，消息从生产者发出即带上的属性。

Topic和Tag的关系如下图所示。

[![mq中Topic和Tag的关系](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3652190061/p69112.png)](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3652190061/p69112.png)

&nbsp;

## 适用场景

您可能会有这样的疑问：到底什么时候该用Topic，什么时候该用Tag？

建议您从以下几个方面进行判断：

- 消息类型是否一致：如普通消息、事务消息、定时（延时）消息、顺序消息，不同的消息类型使用不同的Topic，无法通过Tag进行区分。
- 业务是否相关联：没有直接关联的消息，如淘宝交易消息，京东物流消息使用不同的Topic进行区分；而同样是天猫交易消息，电器类订单、女装类订单、化妆品类订单的消息可以用Tag进行区分。
- 消息优先级是否一致：如同样是物流消息，盒马必须小时内送达，天猫超市24小时内送达，淘宝物流则相对会慢一些，不同优先级的消息用不同的Topic进行区分。
- 消息量级是否相当：有些业务消息虽然量小但是实时性要求高，如果跟某些万亿量级的消息使用同一个Topic，则有可能会因为过长的等待时间而“饿死”，此时需要将不同量级的消息进行拆分，使用不同的Topic。

总的来说，针对消息分类，您可以选择创建多个Topic，或者在同一个Topic下创建多个Tag。但通常情况下，不同的Topic之间的消息没有必然的联系，而Tag则用来区分同一个Topic下相互关联的消息，例如全集和子集的关系、流程先后的关系。

&nbsp;

## 场景示例

以天猫交易平台为例，订单消息和支付消息属于不同业务类型的消息，分别创建**Topic_Order**和**Topic_Pay**，其中订单消息根据商品品类以不同的Tag再进行细分，列如电器类、男装类、女装类、化妆品类等被各个不同的系统所接收。

通过合理的使用Topic和Tag，可以让业务结构清晰，更可以提高效率。

如何通过Tag实现消息过滤，请参见[消息过滤](rocketmq-message-filtering.md)。

