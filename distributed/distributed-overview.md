### 从网络到分布式

&nbsp;

分布式不管是微服务技术栈还是大数据技术栈，分布式已经很成熟了。那么分布式为什么存在呢？换句话说，分布式存在的意义是啥？

&nbsp;

### 意义

- 负载
- 高并发
- 单体到集群
- 横向扩展

一句两句说不清，后续慢慢补充

&nbsp;

### 问题

有人会问， 不是有 tomcat 吗？ 它作为 web 应用的应用层服务， 可以解决部分流量问题。 为什么要出现分布式以及负载均衡服务器呢？ 

#### `tomcat` 为什么慢呢？ 

- tomcat 和 nginx 都属于应用层级别的。 client -> server 通信过程中，它属于最末端的层次，所在层级就限定了它性能慢，为了引入分布式，也不能将 tomcat 性能批判到一无是处，简单理解它至少它性能不高就行。 
- 整个通信过程来看，它是 7 层，数据包通过传输控制层， 3 次握手，网络层，链路层，物理层（操作系统用户态和内核态的切换)
- tomcat 本身 java 实现，构建在 jvm 上，在操作系统以上，相当于又虚拟了一个系统

&nbsp;

#### `router` 为什么快呢？ 

- 功能单一，只做数据包级别的转发
- 不与 client, server 握手
- 没有用户态和内核态的切换

&nbsp;

#### 4层 负载均衡器技术为什么快呢？ 

- 简单点理解它与路由相似

- 它是低层的负载均衡器

- 功能单一，数据转发级别
  - 只看 `ip`， 不看 `url`
- 不会和 client 握手
- 后端服务器是镜像级别的，负载均衡器将流量负载到功能一样的后端服务器
- e.g. lvs

&nbsp;

#### 7 层负载均衡器

- 高层负载均衡器技术

- 需要和 client 握手
- 能够支撑的流量比 4 层的少很多

&nbsp;

&nbsp;